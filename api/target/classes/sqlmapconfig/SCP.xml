<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap
    PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="SCP">

	<resultMap id="scpMap" class="com.hxti.edge.pacs.data.ServiceClassProvider">
      <result property="AETitle"           column="ae_title"
              jdbcType="VARCHAR"           javaType="string"/>
              
      <result property="agentId"           column="agent_id"
              jdbcType="INTEGER"           javaType="int"/>
              
      <result property="port"              column="port"
              jdbcType="INTEGER"           javaType="int"/>
              
      <result property="archiveDirectory"  column="archive_dir"
              jdbcType="VARCHAR"           javaType="string"/>
              
      <result property="tmpDirectory"      column="tmp_dir"
              jdbcType="VARCHAR"           javaType="string"/>
              
      <result property="logFilePath"       column="log_file_path"
              jdbcType="VARCHAR"           javaType="string"/>
              
      <result property="logLevel"          column="log_level"
              jdbcType="VARCHAR"           javaType="string"/>
              
      <result property="thumbnailWidth"    column="thumbnail_width"
              jdbcType="INTEGER"           javaType="int"/>
              
      <result property="thumbnailHeight"   column="thumbnail_height"
              jdbcType="INTEGER"           javaType="int"/>
              
      <result property="thumbnailQuality"  column="thumbnail_quality"
              jdbcType="DECIMAL"           javaType="java.lang.Float"/>
              
      <result property="storeJpegOnMove"   column="store_jpeg_on_move"
              jdbcType="VARCHAR"           javaType="java.lang.Boolean"
              typeHandler="com.hxti.edge.pacs.util.sql.BooleanTypeHandler"/>
   </resultMap>
   
   <select id="allSCPs" resultClass="SCP" resultMap="scpMap">
      SELECT * FROM radiology_scp_service
   </select>
   
   <select id="scpByAETitle" resultClass="SCP" resultMap="scpMap" 
           parameterClass="java.lang.String">
      SELECT *
        FROM radiology_scp_service 
       WHERE ae_title = #value#
   </select>
   
   <insert id="insertSCP" parameterClass="SCP">
      INSERT INTO radiology_scp_service 
             VALUES (
             			0,
      					#AETitle#,
             			#agentId#,
      					#port#,
						#archiveDirectory#,
						#tmpDirectory#,
						#logFilePath#,
						#logLevel#,
						#thumbnailWidth#,
						#thumbnailHeight#,
						#thumbnailQuality#,
						'N'
                  	)
   </insert>
   
   <delete id="deleteSCPByAETitle" parameterClass="java.lang.String">
      DELETE FROM radiology_scp_service
      WHERE ae_title = #value#
   </delete>
   
   <update id="persistSCP" parameterClass="SCP">
      UPDATE radiology_scp_service 
      SET	ae_title = #AETitle#
      <isNotNull property="port" prepend=",">
         port = #port#
      </isNotNull> 
      <isNotNull property="archiveDirectory" prepend=",">
         archive_dir = #archiveDirectory#
      </isNotNull>
      <isNotNull property="tmpDirectory" prepend=",">
         tmp_dir = #tmpDirectory#
      </isNotNull>
      <isNotNull property="logFilePath" prepend=",">
         log_file_path = #logFilePath#
      </isNotNull>
      <isNotNull property="logLevel" prepend=",">
         log_level = #logLevel#
      </isNotNull>
      <isNotNull property="thumbnailWidth" prepend=",">
         thumbnail_width = #thumbnailWidth#
      </isNotNull>
      <isNotNull property="thumbnailHeight" prepend=",">
         thumbnail_height = #thumbnailHeight#
      </isNotNull>
      <isNotNull property="thumbnailQuality" prepend=",">
         thumbnail_quality = #thumbnailQuality#
      </isNotNull>
      <isNotNull property="storeJpegOnMove" prepend=",">
         store_jpeg_on_move = 'N'
      </isNotNull>
      WHERE ae_title = #AETitle#
   </update>

</sqlMap>